biigle.$viewModel("maia-job-form",function(i){new Vue({el:i,data:{showAdvanced:!1},methods:{toggle:function(){this.showAdvanced=!this.showAdvanced}}})}),biigle.$viewModel("maia-show-container",function(i){var e=biigle.$require("maia.job"),n=biigle.$require("maia.states"),t=biigle.$require("maia.api.maiaJob"),a=biigle.$require("maia.api.maiaAnnotation"),o=biigle.$require("messages.store");new Vue({el:i,mixins:[biigle.$require("core.mixins.loader")],components:{sidebar:biigle.$require("annotations.components.sidebar"),sidebarTab:biigle.$require("core.components.sidebarTab"),filterTpTab:biigle.$require("maia.components.filterTpTab"),tpImageGrid:biigle.$require("maia.components.tpImageGrid")},data:{visitedFilterTpTab:!1,visitedRefineTpTab:!1,visitedFilterAcTab:!1,openTab:"info",trainingProposals:[],filterTpOffset:0},computed:{shouldVisitTpTab:function(){return!this.visitedFilterTpTab&&e.state_id===n["training-proposals"]},shouldVisitAcTab:function(){return!this.visitedFilterAcTab&&e.state_id===n["annotation-candidates"]},tpTabHighlight:function(){return!!this.shouldVisitTpTab&&"warning"},acTabHighlight:function(){return!!this.shouldVisitAcTab&&"warning"},infoTabOpen:function(){return"info"===this.openTab},filterTpTabOpen:function(){return"filter-training-proposals"===this.openTab},refineTpTabOpen:function(){return"refine-training-proposals"===this.openTab},filterAcTabOpen:function(){return"filter-annotation-candidates"===this.openTab},visitedFilterOrRefineTpTab:function(){return this.visitedFilterTpTab||this.visitedRefineTpTab},hasNoTrainingProposals:function(){return 0===this.trainingProposals.length}},methods:{handleSidebarToggle:function(){this.$nextTick(function(){this.$refs.imageGrid.$emit("resize")})},handleTabOpened:function(i){this.openTab=i},setTrainingProposals:function(i){this.trainingProposals=i.body},fetchTrainingProposals:function(){this.startLoading(),t.getTrainingProposals({id:e.id}).then(this.setTrainingProposals).catch(o.handleErrorResponse).finally(this.finishLoading)},openRefineTpTab:function(){this.openTab="refine-training-proposals"},handleSelectedTrainingProposal:function(i){i.selected=!0,a.update({id:i.id},{selected:!0}).catch(function(e){o.handleErrorResponse(e),i.selected=!1})},handleDeselectedTrainingProposal:function(i){i.selected=!1,a.update({id:i.id},{selected:!1}).catch(function(e){o.handleErrorResponse(e),i.selected=!0})},updateFilterTpOffset:function(i){this.filterTpOffset=i}},watch:{filterTpTabOpen:function(){this.visitedFilterTpTab=!0},refineTpTabOpen:function(){this.visitedRefineTpTab=!0},filterAcTabOpen:function(){this.visitedFilterAcTab=!0},visitedFilterOrRefineTpTab:function(){this.fetchTrainingProposals()}}})}),biigle.$declare("maia.api.maiaAnnotation",Vue.resource("api/v1/maia-annotations{/id}",{},{getFile:{method:"GET",url:"api/v1/maia-annotations{/id}/file"}})),biigle.$declare("maia.api.maiaJob",Vue.resource("api/v1/maia-jobs{/id}",{},{save:{method:"POST",url:"api/v1/volumes{/id}/maia-jobs"},getTrainingProposals:{method:"GET",url:"api/v1/maia-jobs{/id}/training-proposals"}})),biigle.$component("maia.components.filterTpTab",{props:{trainingProposals:{type:Array,required:!0}},data:function(){return{}},computed:{selectedTp:function(){return this.trainingProposals.filter(function(i){return i.selected})},selectedTpCount:function(){return this.selectedTp.length},tpCount:function(){return this.trainingProposals.length}},methods:{proceed:function(){this.$emit("proceed")}},created:function(){}}),biigle.$component("maia.components.tpImageGrid",{mixins:[biigle.$require("volumes.components.imageGrid")],components:{imageGridImage:biigle.$require("maia.components.tpImageGridImage")}}),biigle.$component("maia.components.tpImageGridImage",{mixins:[biigle.$require("volumes.components.imageGridImage")],template:'<figure class="image-grid__image image-grid__image--relabel" :class="classObject" :title="title"><img @click="toggleSelect" :src="url || emptyUrl"><div v-if="showAnnotationLink" class="image-buttons"><a :href="showAnnotationLink" target="_blank" class="image-button" title="Show the annotation in the annotation tool"><span class="fa fa-external-link-square-alt" aria-hidden="true"></span></a></div></figure>',computed:{showAnnotationLink:function(){return!1},selected:function(){return this.image.selected},title:function(){return this.selected?"Undo marking as interesting":"Mark as interesting"}},methods:{getBlob:function(){return biigle.$require("maia.api.maiaAnnotation").getFile({id:this.image.id})}}});